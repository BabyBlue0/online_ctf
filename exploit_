#!/usr/bin/env python3
#-*- coding: utf-8 -*-

import socket
from time import sleep
import struct
import telnetlib
import os


def connect( ip, port ):
    return socket.create_connection((ip, port))

# trancelate int -> byte(32bit)
def p( x ):
    return struct.pack('<I', x )

# transelate int -> byte(64bit)
def p64( x ):
    return struct.pack('<Q', x )

#transelate string,byte -> int(32bit)
def u( x ):
    return struct.unpack('<I', x )[0]

#transelate string,byte -> int(64bit)
def u64( x ):
    return struct.unpack('<Q', x )[0]

def interact( s ):
    print('----- interactive mode -----')
    t = telnetlib.Telnet()
    t.sock = s
    t.interact()


def main():
    # command : socat tcp:l:50005,reuseaddr,fork system:./hoge
    s = connect('localhost', 50005 )
    
    payload = b''
    
    s.sendall( payload )
    s.recv( 9999 )
    

    interact( s )

if( __name__ == '__main__' ): main()
